<a name=top></a><!doctype html>
<html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>郝鸿涛：Hongtao Hao</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css rel=stylesheet>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/bash.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/python.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/vega@5.17.0></script>
<script src=https://cdn.jsdelivr.net/npm/vega-lite@4.17.0></script>
<script src=https://cdn.jsdelivr.net/npm/vega-embed@6.12.2></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel=icon href=https://hongtaoh.com/ht10.ico>
</head>
<body>
<div class=wrapper>
<header class=header>
<nav class=nav>
<a href=/ class=nav-logo>
<img src=/media/ht10.png width=50 height=50 alt="Hongtao Hao">
</a>
<ul class=nav-links>
<li><a href=/>Home</a></li>
<li><a href=/en/vitae/>Vitae</a></li>
<li><a href=/en/projects/>Projects</a></li>
<li><a href=/en/blog/>Blog</a></li>
<li><a href=/en/apad/>APAD</a></li>
<li><a href=/cn/blog/>中文</a></li>
</ul>
</nav>
</header>
<main class=content role=main>
<div style=text-align:center>
<h1>How to Embed an Observable Notebook in A Hugo Blog</h1>
<p>Hongtao Hao
/ 2020-11-02 </p>
<hr>
</div>
<span class=article-toolbar>
<a href=https://github.com/hongtaoh/hongtaoh.github.io/edit/sources/content/en/blog/2020-11-02-embed-observable-notebook-in-blogs.md style=font-size:24px;color:#000 target=_blank><i class="fa fa-edit" aria-hidden=true title="Suggest an edit of this page"></i>
</a>
</span>
<aside class=toc>
Table of Contents:
<nav id=TableOfContents>
<ul>
<li><a href=#direct-embedding-through-iframe>Direct embedding through <code>iframe</code></a></li>
<li><a href=#manual-embedding>Manual embedding</a>
<ul>
<li><a href=#1-dropdown-menu-select-your-favorite-season>1. Dropdown menu: Select your favorite season!</a></li>
</ul>
</li>
<li><a href=#2-slider-choose-your-confidence-interval>2. Slider: Choose your confidence interval</a></li>
<li><a href=#3-buttons>3. Buttons</a></li>
<li><a href=#full-width>Full width</a></li>
</ul>
</nav>
</aside>
<div class="body-text list-text">
<p>Embedding an Observable notebook in a Hugo blog post is no different than <a href=/en/2020/11/02/exporting-observable-notebook/>embedding it in a stand alone webpage</a>
. Also, you can read <a href=https://visionscarto.net/observable-jekyll/ target=_blank rel="noreferrer noopener">this tutorial</a>
on <a href=https://visionscarto.net/observable-jekyll/ target=_blank rel="noreferrer noopener">Observable Jekyll</a>
. Although it used Jekyll as an example, it&rsquo;s exactly the same for Hugo.</p>
<h2 id=direct-embedding-through-iframe>Direct embedding through <code>iframe</code><a href=#direct-embedding-through-iframe class=header-anchor arialabel=Anchor> # </a></h2>
<p>You can embed a visualization on ObservableHQ directly through an <code>iframe</code>. I talked about how to do it <a href=en/2020/11/02/exporting-observable-notebook/#embed-directly-via-iframe>here</a>
.</p>
<p>This is the result:</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#666>&lt;</span>iframe width<span style=color:#666>=</span><span style=color:#ba2121>&#34;100%&#34;</span> height<span style=color:#666>=</span><span style=color:#ba2121>&#34;534&#34;</span> frameborder<span style=color:#666>=</span><span style=color:#ba2121>&#34;0&#34;</span>
  src<span style=color:#666>=</span><span style=color:#ba2121>&#34;https://observablehq.com/embed/@hongtaoh/explrable-data?cell=reset&amp;cell=add&amp;cell=D_chart&#34;</span><span style=color:#666>&gt;&lt;</span><span>/iframe&gt;</span>
</code></pre></div><iframe width=100% height=534 frameborder=0 src="https://observablehq.com/embed/@hongtaoh/explrable-data?cell=reset&cell=add&cell=D_chart"></iframe>
<p>If you don&rsquo;t want the logo at the bottom, or that you think the loading is too slow, you have to embed it manually, which is what I am going to talk about in this post.</p>
<h2 id=manual-embedding>Manual embedding<a href=#manual-embedding class=header-anchor arialabel=Anchor> # </a></h2>
<p>This part is almost exactly the same as <a href=en/2020/11/02/exporting-observable-notebook/#embed-manually>embedding in a stand-alone webpage</a>
. However, since in a Hugo blog post, the <code>head</code> and <code>body</code> are already defined, you don&rsquo;t need to define the <code>head</code> and don&rsquo;t need to manually write <code>&lt;p>...&lt;/p></code>, for which you can simply use Markdown (which is why Hugo is invented&mldr;).</p>
<p>You should know that <strong>within</strong> a Hugo blog post, you can still (and herhaps need to) write <code>&lt;div>...&lt;/div</code>, directly include a stylesheet with some CSS, and incldue the <code>&lt;script type="module"></code>. You can see the source codes of this blog post <a href=https://raw.githubusercontent.com/hongtaoh/hongtaoh.github.io/sources/content/en/blog/2020-11-02-embed-observable-notebook-in-blogs.md target=_blank rel="noreferrer noopener">here</a>
.</p>
<p>The below is what it looks like to manually embed this <a href=https://observablehq.com/@hongtaoh/explrable-data target=_blank rel="noreferrer noopener">Observable notebook</a>
of mine.</p>
<h3 id=1-dropdown-menu-select-your-favorite-season>1. Dropdown menu: Select your favorite season!<a href=#1-dropdown-menu-select-your-favorite-season class=header-anchor arialabel=Anchor> # </a></h3>
<div>
<div id=viewof-season></div>
<div id=TimeSeason></div>
</div>
<h2 id=2-slider-choose-your-confidence-interval>2. Slider: Choose your confidence interval<a href=#2-slider-choose-your-confidence-interval class=header-anchor arialabel=Anchor> # </a></h2>
<div>
<div id=viewof-CI></div>
Dataset: <div id=dataset></div>
<div id=CIbody></div>
</div>
<h2 id=3-buttons>3. Buttons<a href=#3-buttons class=header-anchor arialabel=Anchor> # </a></h2>
<div>
<div id=add></div>
<div id=reset></div>
<div id=chart></div>
<button type=button onclick="window.location.href='https://observablehq.com/@hongtaoh/explrable-data#D_chart'">See the source code.</button>
</div>
<h2 id=full-width>Full width<a href=#full-width class=header-anchor arialabel=Anchor> # </a></h2>
<p>If you want the visualization to be full width, it&rsquo;s very easy to do so. Follow the instructions in <a href=https://visionscarto.net/observable-jekyll/ target=_blank rel="noreferrer noopener">this tutorial</a>
. Wrap the target visuzliation within a <code>div</code> that is classed (What? It&rsquo;s not a verb?) <code>fullwidth</code> (or any name you prefer), and define <code>fullwidth</code> this way<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>:</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-css data-lang=css>.<span style=color:#00f;font-weight:700>fullwidth</span> {
  <span style=color:green;font-weight:700>width</span>: <span style=color:#666>100</span><span style=color:#b00040>vw</span>;
  <span style=color:green;font-weight:700>position</span>: <span style=color:green;font-weight:700>relative</span>;
  <span style=color:green;font-weight:700>left</span>: <span style=color:#666>50</span><span style=color:#b00040>%</span>;
  <span style=color:green;font-weight:700>right</span>: <span style=color:#666>50</span><span style=color:#b00040>%</span>;
  <span style=color:green;font-weight:700>margin-left</span>: <span style=color:#666>-50</span><span style=color:#b00040>vw</span>;
  <span style=color:green;font-weight:700>margin-right</span>: <span style=color:#666>-50</span><span style=color:#b00040>vw</span>;
}
</code></pre></div><style>#chart,#add,#reset{margin-bottom:10px}</style>
<script type=module>
      import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@4/dist/runtime.js";
      import notebook from "https://api.observablehq.com/@hongtaoh/explrable-data.js?v=3";

      function render(_node, value) {
        if (!(value instanceof Element)) {
          const el = document.createElement("span");
          el.innerHTML = value;
          value = el;
        }
        if (_node.firstChild !== value) {
          if (_node.firstChild) {
            while (_node.lastChild !== _node.firstChild) _node.removeChild(_node.lastChild);
            _node.replaceChild(value, _node.firstChild);
          } else {
            _node.appendChild(value);
          }
        }
      }
      
      const renders = {
      	"viewof season": "#viewof-season",
        "TimeSeason": "#TimeSeason",
        "viewof CI": "#viewof-CI",
        "CIbody": "#CIbody",
        "dataset": "#dataset",
        "reset": "#reset",
        "add": "#add",
        "D_chart": "#chart",
      }

      
      const runtime = new Runtime();
      const main = runtime.module(notebook, name => {
        const selector = renders[name];
        if (selector) {
          return {fulfilled: (value) => render(document.querySelector(selector), value)}
        } else {
          return true;
        }
      });
      
  	</script>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>It&rsquo;s not my creation, but the codes from <a href=https://visionscarto.net/observable-jekyll/ target=_blank rel="noreferrer noopener">this tutorial</a>
.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
<p style=color:#777>Last modified on 2021-12-12</p>
</div>
<a href=#top><i class="fa fa-chevron-up" style=font-size:30px;color:#000></i></a>
</main>
<footer class=footer>
<script src=https://utteranc.es/client.js repo=hongtaoh/hongtaoh.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script>
<script type=text/javascript src=/js/math-code.js></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type=text/javascript src=/js/center-img.js></script>
<ul class=footer-links>
<li><a href=/en/blog/index.xml type=application/rss+xml title="RSS feed">
Subscribe </a>
</li>
<li>
<a href=http://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank>
License
<i class="fa fa-cc" aria-hidden=true title="Attribution-NonCommercial-ShareAlike 4.0 International"></i>
</a>
</li>
</ul>
<div class=copyright-text>
©
Hongtao Hao
2020-2021
</div>
</footer>
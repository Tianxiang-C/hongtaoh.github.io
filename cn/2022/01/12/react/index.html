<a name=top></a><!doctype html>
<html lang=en-us>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>郝鸿涛：Hongtao Hao</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/styles/github.min.css rel=stylesheet>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/r.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/bash.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/languages/python.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/vega@5.17.0></script>
<script src=https://cdn.jsdelivr.net/npm/vega-lite@4.17.0></script>
<script src=https://cdn.jsdelivr.net/npm/vega-embed@6.12.2></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel=icon href=https://hongtaoh.com/ht10.ico>
</head>
<body>
<div class=wrapper>
<header class=header>
<nav class=nav>
<a href=/ class=nav-logo>
<img src=/media/ht10.png width=50 height=50 alt="Hongtao Hao">
</a>
<ul class=nav-links>
<li><a href=/cn/>关于</a></li>
<li><a href=/cn/blog/>日志</a></li>
<li><a href=/>English</a></li>
</ul>
</nav>
</header>
<main class=content role=main>
<div style=text-align:center>
<h1>React 简单知识总结</h1>
<p>郝鸿涛
/ 2022-01-12 </p>
<hr>
</div>
<span class=article-toolbar>
<a href=https://github.com/hongtaoh/hongtaoh.github.io/edit/sources/content/cn/blog/2022-01-12-react-intro.md style=font-size:24px;color:#000 target=_blank><i class="fa fa-edit" aria-hidden=true title=编辑本页></i>
</a>
</span>
<aside class=toc>
Table of Contents:
<nav id=TableOfContents>
<ul>
<li><a href=#起步>起步</a></li>
<li><a href=#准备>准备</a></li>
<li><a href=#jsx-介绍>JSX 介绍</a></li>
<li><a href=#jsx-语法>JSX 语法</a></li>
<li><a href=#组件-components>组件 (Components)</a></li>
<li><a href=#属性-props>属性 props</a></li>
<li><a href=#事件-events>事件 Events</a></li>
<li><a href=#条件-conditions>条件 Conditions</a>
<ul>
<li><a href=#if-statement>If statement</a></li>
<li><a href=#heading>&&</a></li>
</ul>
</li>
<li><a href=#名单lists>名单：Lists</a></li>
<li><a href=#钩子-hooks>钩子 Hooks</a>
<ul>
<li><a href=#状态钩子usestate>状态钩子：useState()</a></li>
<li><a href=#副作用钩子useeffect>副作用钩子：useEffect</a></li>
<li><a href=#运行顺序>运行顺序</a></li>
</ul>
</li>
</ul>
<ul>
<li><a href=#组件的-state-和-setstate>组件的 state 和 setState</a></li>
<li><a href=#渲染列表数据>渲染列表数据</a></li>
</ul>
</nav>
</aside>
<div class="body-text list-text">
<h2 id=起步>起步<a href=#起步 class=header-anchor arialabel=Anchor> # </a></h2>
<p>先下载 Node.js</p>
<p>然后，打开命令行：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npx create-react-app my-react-app 
<span style=color:green>cd</span> my-react-app
npm start
</code></pre></div><p><code>my-react-app</code> 你想换别的也行。</p>
<p>运行后，会自动打开 <a href=localhost:3000><code>localhost:3000</code></a>
。如果没有，手动在浏览器地址栏输入 <code>localhost:3000</code>.</p>
<h2 id=准备>准备<a href=#准备 class=header-anchor arialabel=Anchor> # </a></h2>
<p>把 src 文件夹中除 <code>index.js</code> 外的文档都删除。让 <code>index.js</code> 内容只剩下：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> React from <span style=color:#ba2121>&#39;react&#39;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>;

ReactDOM.render(<span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>你好<span>！</span><span style=color:#666>&lt;</span><span>/p&gt;, document.getElementById(&#39;root&#39;));</span>
</code></pre></div><h2 id=jsx-介绍>JSX 介绍<a href=#jsx-介绍 class=header-anchor arialabel=Anchor> # </a></h2>
<p>在 <code>index.js</code> 中加入以下内容：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>const</span> Hello <span style=color:#666>=</span> <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>你好<span>！</span><span style=color:#666>&lt;</span><span>/p&gt;;</span>
</code></pre></div><p>把上面的代码放到 <code>ReactDOM.render()</code> 上面。然后，把 <code>ReactDOM.render(&lt;p>你好！&lt;/p>, document.getElementById('root'));</code> 改成：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>ReactDOM.render(Hello, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>刷新一下浏览器，结果是不是一样的？</p>
<p>像 <code>const Hello = &lt;p>你好！&lt;/p>;</code> 这样在 JavaScript 中写 HTML 代码，就叫 JSX。JSX 是 <a href=https://www.w3schools.com/react/react_jsx.asp target=_blank rel="noreferrer noopener">JavaScript XML 的缩写</a>
。</p>
<h2 id=jsx-语法>JSX 语法<a href=#jsx-语法 class=header-anchor arialabel=Anchor> # </a></h2>
<ol>
<li>
<p>JSX 中写 HTML: <code>const myelement = &lt;h1>I Love JSX!&lt;/h1>;</code></p>
</li>
<li>
<p>JSX 中写 javascript 用 <code>{}</code> 包起来</p>
</li>
</ol>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>let</span> text <span style=color:#666>=</span> <span style=color:#ba2121>&#39;good&#39;</span>;
<span style=color:green;font-weight:700>const</span> myElement <span style=color:#666>=</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>I am {text} enough.<span style=color:#666>&lt;</span><span>/h1&gt;</span>

ReactDOM.render(myElement, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><ol start=3>
<li>
<p>JSX: HTML 代码很长时，用 <code>()</code> 包起来。</p>
</li>
<li>
<p>JSX 中的 HTML 代码必须只有一个“高层”：</p>
</li>
</ol>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>const</span> myelement <span style=color:#666>=</span> (
  <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>
    <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>I am a paragraph.<span style=color:#666>&lt;</span><span>/p&gt;</span>
    <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>I am another paragraph.<span style=color:#666>&lt;</span><span>/p&gt;</span>
  <span style=color:#666>&lt;</span><span>/div&gt;</span>
);
</code></pre></div><p>也就是说，上面两个段落，你必须用 <code>&lt;div></code> 包起来。如果不想用 <code>&lt;div></code>，用一个空的 html 元素就好：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>const</span> myelement <span style=color:#666>=</span> (
  <span style=color:#666>&lt;&gt;</span>
    <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>I am a paragraph.<span style=color:#666>&lt;</span><span>/p&gt;</span>
    <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>I am another paragraph.<span style=color:#666>&lt;</span><span>/p&gt;</span>
  <span style=color:#666>&lt;</span><span>/&gt;</span>
);
</code></pre></div><ol start=5>
<li>在 JSX 中用 <code>className</code> 而不是 <code>class</code></li>
</ol>
<p><code>const myElement = &lt;h1 classNmae = "myclass">Are you OK?&lt;/h1></code></p>
<ol start=6>
<li>JSX 中不能用 if statement. 用的话写在 JSX 外面。换句话说，if statement 里可以包含 JSX，但 JSX 中不能包含 if statement。</li>
</ol>
<p>与此相关的是，React 官方教程中提到，<a href=https://reactjs.org/docs/introducing-jsx.html#jsx-is-an-expression-too target=_blank rel="noreferrer noopener">&ldquo;JSX is an expression too&rdquo;</a>
:</p>
<blockquote>
<p>After compilation, JSX expressions become regular JavaScript function calls and evaluate to JavaScript objects.</p>
</blockquote>
<p>好好体会下面这句话，很重要：</p>
<blockquote>
<p>This means that you can use JSX inside of <code>if</code> statements and <code>for</code> loops, assign it to variables, accept it as arguments, and return it from functions.</p>
</blockquote>
<h2 id=组件-components>组件 (Components)<a href=#组件-components class=header-anchor arialabel=Anchor> # </a></h2>
<p><div class=info>
组件分成<a href=https://www.w3schools.com/react/react_components.asp target=_blank rel="noreferrer noopener">两类</a>
：类组件 (Class components)、函数组件 (Function componnets)。2019 年 <a href=https://reactjs.org/blog/2019/02/06/react-v16.8.0.html target=_blank rel="noreferrer noopener">React v16.8</a>
发布后，现在的推荐是使用函数组件+<a href=https://www.w3schools.com/react/react_hooks.asp target=_blank rel="noreferrer noopener">钩子</a>
(hooks)。
</div></p>
<ol>
<li>
<p>组件名字第一个字母必须大写。</p>
</li>
<li>
<p>组件的功能和 JavaScript 的 Function 一样，不过组件返回的结果是 HTML:</p>
</li>
</ol>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Book() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我是一本书<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
};
</code></pre></div><ol start=3>
<li>
<p>每一个组件都必须有返回的内容，也就是说，每一个组件在定义时都必须有 <code>return</code>。</p>
</li>
<li>
<p>有类 (Class) 组件和功能 (Function) 组件。现在一般推荐用功能组件 + 钩子 (Hooks)</p>
</li>
<li>
<p>如何使用组件 <code>&lt;组件名 /></code>：</p>
</li>
</ol>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>ReactDOM.render(<span style=color:#666>&lt;</span>Book <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>这个知识点非常重要。你现在应该知道，<code>ReactDOM.render()</code> 输出的结果是刚才你定义的组件，这个结果放在了 React 已经定义好的 root 里。</p>
<p>你可以想象为有一个已经被定义好的空的 <code>div</code>: <code>&lt;div id='root'>&lt;/div></code>。这个空的 div 被称为 <a href=https://reactjs.org/docs/rendering-elements.html#rendering-an-element-into-the-dom target=_blank rel="noreferrer noopener">&ldquo;root&rdquo; DOM node</a>
</p>
<ol start=6>
<li>组件中的属性 (props)</li>
</ol>
<p>props 是 properties 的缩写。它有点像是 <a href=https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes target=_blank rel="noreferrer noopener">HTML 中的属性</a>
(attributes)，比如 <code>id</code> 和 <code>class</code>。</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Book(props) {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我是一本{props.adj}书<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
};

ReactDOM.render(<span style=color:#666>&lt;</span>Book adj<span style=color:#666>=</span><span style=color:#ba2121>&#34;极好的&#34;</span> <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>即，在创建组件时，写上 props，在返回的 HTML 中放上 props，在具体输出时，写明 props 的内容。这里的 adj 你可以随便换成别的，不过在使用时，即 <code>props.adj</code> 也相应地换成你用的词。</p>
<p>另外，你不一定非要用 <code>props</code> 这个词，换成任何你想要的都可以，比如 <code>shuxing</code>。不过用 <code>props</code> 或者 <code>prop</code> 别人一眼就知道是啥，因为通用。</p>
<ol start=7>
<li>组件中使用别的组件</li>
</ol>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Book() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我是一本书<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
};

<span style=color:green;font-weight:700>function</span> Question() {
	<span style=color:green;font-weight:700>return</span> (
	  <span style=color:#666>&lt;&gt;</span>
	    <span style=color:#666>&lt;</span>Book <span style=color:#666>/&gt;</span>
	    <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>那你呢<span>？</span><span style=color:#666>&lt;</span><span>/h2&gt;</span>
	  <span style=color:#666>&lt;</span><span>/&gt;</span>
	);
}

ReactDOM.render(<span style=color:#666>&lt;</span>Question <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><ol start=8>
<li>重复使用组件</li>
</ol>
<p>React 的核心思想是让代码可以重复使用。刚才我们定义了 Book 组件，但如果你在 <code>src</code> 文件夹中另一个 js 文件中也需要用到 Book 组件怎么办？</p>
<p>如果 Book 组件你会在两个或者两个以上 js 文件中用到，你可以把它单独弄成一个 js 文件。新建一个 js 文件，记得命名时首字母要大写，比如：<code>Book.js</code>，把以下代码放进去：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Book() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我是一本书<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
};

<span style=color:green;font-weight:700>export</span> <span style=color:green;font-weight:700>default</span> Book;
</code></pre></div><p><code>export default Book</code> 是指明之后如何用这个组件。如果你想深究 <code>export default</code> 的用法，请看<a href=https://stackoverflow.com/q/36426521 target=_blank rel="noreferrer noopener">这里</a>
。</p>
<p>然后把 <code>Book.js</code> 放到 <code>src</code> 文件夹，以后用到 Book 组件就这样用它：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> React from <span style=color:#ba2121>&#39;react&#39;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>;
<span style=color:green;font-weight:700>import</span> Book from <span style=color:#ba2121>&#39;./Book.js&#39;</span>;

ReactDOM.render(<span style=color:#666>&lt;</span>Book <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><h2 id=属性-props>属性 props<a href=#属性-props class=header-anchor arialabel=Anchor> # </a></h2>
<p>props 的基本用法上面讲过了，这里不重复。这里主要讲一下，props 也可以在另一个组件中使用，这和它在 <code>ReactDOM.render()</code> 中的基础用法是一样：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Book(props) {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我是一本{props.adj}书<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
};

<span style=color:green;font-weight:700>function</span> Question() {
	<span style=color:green;font-weight:700>return</span> (
	  <span style=color:#666>&lt;&gt;</span>
	    <span style=color:#666>&lt;</span>Book adj<span style=color:#666>=</span><span style=color:#ba2121>&#34;极好的&#34;</span><span style=color:#666>/&gt;</span>
	    <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>那你呢<span>？</span><span style=color:#666>&lt;</span><span>/h2&gt;</span>
	  <span style=color:#666>&lt;</span><span>/&gt;</span>
	);
}

ReactDOM.render(<span style=color:#666>&lt;</span>Question <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div>
<h2 id=事件-events>事件 Events<a href=#事件-events class=header-anchor arialabel=Anchor> # </a></h2>
<p>通常我们在 HTML 中这样写：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:green;font-weight:700>button</span> <span style=color:#7d9029>onclick</span><span style=color:#666>=</span><span style=color:#ba2121>&#34;hitme()&#34;</span>&gt;你打我呀&lt;/<span style=color:green;font-weight:700>button</span>&gt;
</code></pre></div><p>但是在 React 中我们这样写：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#666>&lt;</span>button onClick<span style=color:#666>=</span>{hitme}<span style=color:#666>&gt;</span>你打我呀<span style=color:#666>&lt;</span><span>/button&gt;</span>
</code></pre></div><p>有两个不同：</p>
<ol>
<li>在 React 中是 <code>onClick</code> 而不是 <code>onclick</code>;</li>
<li>在 React 中用 <code>{hitme}</code> 而不是 <code>"hitme()"</code></li>
</ol>
<p>具体怎么用呢？</p>
<p>把这个事件和事件中用到的函数都放到一个组件中：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> TryHitme() {
	<span style=color:green;font-weight:700>const</span> hitme <span style=color:#666>=</span> () =&gt; {
		alert(<span style=color:#ba2121>&#34;你打不着&#34;</span>);
	}

	<span style=color:green;font-weight:700>return</span> (
		<span style=color:#666>&lt;</span>button onClick<span style=color:#666>=</span>{hitme}<span style=color:#666>&gt;</span>你打我呀<span style=color:#666>&lt;</span><span>/button&gt;</span>
		);
}

ReactDOM.render(<span style=color:#666>&lt;</span>TryHitme <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>值得讲一下的是上面的那个<a href=https://www.w3schools.com/react/react_es6_arrow.asp target=_blank rel="noreferrer noopener">箭头函数 (Arrow Function)</a>
，这是 ES6 之后才有的。上面那个箭头函数等同于：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>const</span> hitme <span style=color:#666>=</span> <span style=color:green;font-weight:700>function</span>() {
	<span style=color:green;font-weight:700>return</span> alert(<span style=color:#ba2121>&#39;你打不着&#39;</span>)
}
</code></pre></div><p><code>return</code> 后面的内容只能<a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/return#automatic_semicolon_insertion target=_blank rel="noreferrer noopener">在同一行写</a>
，如果内容过多，你可以把内容放在括号 () 里：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>const</span> hitme <span style=color:#666>=</span> <span style=color:green;font-weight:700>function</span>() {
	<span style=color:green;font-weight:700>return</span> (
		alert(<span style=color:#ba2121>&#39;你打不着啊打不着，打不着啊打不着，你打不着啊打不着，打不着啊打不着，你打不着啊打不着，打不着啊打不着，你打不着啊打不着，打不着啊打不着，你看你就是打不着&#39;</span>)
		)
}
</code></pre></div><h2 id=条件-conditions>条件 Conditions<a href=#条件-conditions class=header-anchor arialabel=Anchor> # </a></h2>
<p>上面讲过，一个组件中可以用另一个组件，根据这一规则，我们可以让内容有变化。</p>
<p>比如，我有一个参数，<code>isHappy</code>。当这个参数为真时，我想显示“今儿呀嘛真高兴啊”，当参数为假时显示 “今天好衰啊”。如何实现呢？就用上面这个规则。有以下几种方法</p>
<h3 id=if-statement>If statement<a href=#if-statement class=header-anchor arialabel=Anchor> # </a></h3>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Happy() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>今儿呀嘛真高兴啊<span style=color:#666>&lt;</span><span>/h2&gt;</span>
}

<span style=color:green;font-weight:700>function</span> Sad() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>今天好衰啊<span style=color:#666>&lt;</span><span>/h2&gt;</span>
}

<span style=color:green;font-weight:700>function</span> MyMood(props) {
	<span style=color:green;font-weight:700>const</span> HappyOrNot <span style=color:#666>=</span> props.isHappy;

	<span style=color:green;font-weight:700>if</span> (HappyOrNot) {
		<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>Happy <span style=color:#666>/&gt;</span>;
	} <span style=color:green;font-weight:700>else</span> {
		<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>Sad <span style=color:#666>/&gt;</span>;
	}
}

ReactDOM.render(<span style=color:#666>&lt;</span>MyMood isHappy<span style=color:#666>=</span>{<span style=color:green;font-weight:700>false</span>} <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><p>你可以把 <code>&lt;MyMood isHappy={false} /></code> 改成 <code>&lt;MyMood isHappy={true} /></code> 看结果有啥变化。</p>
<p>上面那个 if statement 可以<a href=https://www.w3schools.com/react/react_es6_ternary.asp target=_blank rel="noreferrer noopener">简化为</a>
：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Mood(props) {
	<span style=color:green;font-weight:700>const</span> HappyOrNot <span style=color:#666>=</span> props.isHappy;
	<span style=color:green;font-weight:700>return</span> (
		HappyOrNot <span style=color:#666>?</span> <span style=color:#666>&lt;</span>Happy<span style=color:#666>/&gt;</span> <span style=color:#666>:</span> <span style=color:#666>&lt;</span>Sad<span style=color:#666>/&gt;</span>
		);
}
</code></pre></div><h3 id=heading>&&<a href=#heading class=header-anchor arialabel=Anchor> # </a></h3>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Happy() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>今儿呀嘛真高兴啊<span style=color:#666>&lt;</span><span>/h2&gt;</span>
}

<span style=color:green;font-weight:700>function</span> Sad() {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h2<span style=color:#666>&gt;</span>今天好衰啊<span style=color:#666>&lt;</span><span>/h2&gt;</span>
}

<span style=color:green;font-weight:700>function</span> MyMood(props) {
	<span style=color:green;font-weight:700>const</span> HappyOrNot <span style=color:#666>=</span> props.isHappy;
	<span style=color:green;font-weight:700>return</span> (
		<span style=color:#666>&lt;&gt;</span>
		  <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>今天怎么样啊<span>？</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
		  {HappyOrNot <span style=color:#666>&amp;&amp;</span> 
		      Happy()
	      }
		  {<span style=color:#666>!</span>HappyOrNot <span style=color:#666>&amp;&amp;</span>
			  Sad()
		  }
		 <span style=color:#666>&lt;</span><span>/&gt;</span>
	)
}

ReactDOM.render(<span style=color:#666>&lt;</span>MyMood isHappy<span style=color:#666>=</span>{<span style=color:green;font-weight:700>false</span>}<span style=color:#666>/&gt;</span>,
  <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>)
)
</code></pre></div><p>别忘了加 <code>&lt;>&lt;/></code>。</p>
<h2 id=名单lists>名单：Lists<a href=#名单lists class=header-anchor arialabel=Anchor> # </a></h2>
<p>我们会用到 <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map target=_blank rel="noreferrer noopener">map 函数</a>
。</p>
<p>一个简单的例子：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Lessons(props) {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>li<span style=color:#666>&gt;</span>我学了 {props.subject}<span>。</span><span style=color:#666>&lt;</span><span>/li&gt;</span>
}

<span style=color:green;font-weight:700>function</span> WhatILearned() {
	<span style=color:green;font-weight:700>const</span> subjects <span style=color:#666>=</span> [<span style=color:#ba2121>&#39;语文&#39;</span>, <span style=color:#ba2121>&#39;数学&#39;</span>, <span style=color:#ba2121>&#39;英语&#39;</span>];
	<span style=color:green;font-weight:700>return</span> (
	  <span style=color:#666>&lt;&gt;</span>
	    <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>小明<span>，</span>你今天在学校都学了什么呀<span>？</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
	     <span style=color:#666>&lt;</span>ul<span style=color:#666>&gt;</span>
	       {subjects.map((s) =&gt; <span style=color:#666>&lt;</span>Lessons subject<span style=color:#666>=</span>{s}<span style=color:#666>/&gt;</span>)}
	     <span style=color:#666>&lt;</span><span>/ul&gt;</span>
	  <span style=color:#666>&lt;</span><span>/&gt;</span>
	)
}

ReactDOM.render(<span style=color:#666>&lt;</span>WhatILearned<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><p><div class=info>
每一个函数 (function) 都要有 return 的内容，别忘了加 <code>return</code>。
</div></p>
<p>为了让名单便于管理，比如，便于删除和更新，我们可以给每一个名单中的项目加上一个索引，这里用 <code>id</code>:</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> Lessons(props) {
	<span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>li<span style=color:#666>&gt;</span>我学了 {props.name}<span>。</span><span style=color:#666>&lt;</span><span>/li&gt;</span>
}

<span style=color:green;font-weight:700>function</span> WhatILearned() {
	<span style=color:green;font-weight:700>const</span> subjects <span style=color:#666>=</span> [
	  {id<span style=color:#666>:</span> <span style=color:#666>1</span>, name<span style=color:#666>:</span> <span style=color:#ba2121>&#39;语文&#39;</span>},
	  {id<span style=color:#666>:</span> <span style=color:#666>2</span>, name<span style=color:#666>:</span> <span style=color:#ba2121>&#39;数学&#39;</span>},
	  {id<span style=color:#666>:</span> <span style=color:#666>3</span>, name<span style=color:#666>:</span> <span style=color:#ba2121>&#39;英语&#39;</span>},
	];
	<span style=color:green;font-weight:700>return</span> (
	  <span style=color:#666>&lt;&gt;</span>
	    <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>小明<span>，</span>你今天在学校都学了什么呀<span>？</span><span style=color:#666>&lt;</span><span>/h1&gt;</span>
	     <span style=color:#666>&lt;</span>ul<span style=color:#666>&gt;</span>
	       {subjects.map((s) =&gt; <span style=color:#666>&lt;</span>Lessons key<span style=color:#666>=</span>{s.id} name<span style=color:#666>=</span>{s.name}<span style=color:#666>/&gt;</span>)}
	     <span style=color:#666>&lt;</span><span>/ul&gt;</span>
	  <span style=color:#666>&lt;</span><span>/&gt;</span>
	)
}

ReactDOM.render(<span style=color:#666>&lt;</span>WhatILearned<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><h2 id=钩子-hooks>钩子 Hooks<a href=#钩子-hooks class=header-anchor arialabel=Anchor> # </a></h2>
<h3 id=状态钩子usestate>状态钩子：useState()<a href=#状态钩子usestate class=header-anchor arialabel=Anchor> # </a></h3>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> { useState } from <span style=color:#ba2121>&#34;react&#34;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#34;react-dom&#34;</span>;

<span style=color:green;font-weight:700>function</span> ClickOrNot() {
	<span style=color:green;font-weight:700>const</span> [click, setClick] <span style=color:#666>=</span> useState(<span style=color:#ba2121>&#34;anything&#34;</span>)

	<span style=color:green;font-weight:700>return</span> (
	  <span style=color:#666>&lt;&gt;</span>
	  <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>I am {click}.<span style=color:#666>&lt;</span><span>/p&gt;</span>
	  <span style=color:#666>&lt;</span>button
	    type<span style=color:#666>=</span><span style=color:#ba2121>&#34;button&#34;</span>
	    onClick<span style=color:#666>=</span>{() =&gt; setClick(<span style=color:#ba2121>&#34;clicked&#34;</span>)}
	  <span style=color:#666>&gt;</span>Click me<span style=color:#666>!&lt;</span><span>/button&gt;</span>
	  <span style=color:#666>&lt;</span>button
	    type<span style=color:#666>=</span><span style=color:#ba2121>&#34;button&#34;</span>
	    onClick<span style=color:#666>=</span>{() =&gt; setClick(<span style=color:#ba2121>&#34;unclicked&#34;</span>)}
	  <span style=color:#666>&gt;</span>Unclick me<span style=color:#666>&lt;</span><span>/button&gt;</span>
	  <span style=color:#666>&lt;</span><span>/&gt;</span>
	)
}

ReactDOM.render(<span style=color:#666>&lt;</span>ClickOrNot <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>我们想要这样一种结果：初始状态是一段简单文本：&ldquo;I am anything&rdquo;。当用户点 &ldquo;click me&rdquo; 时，内容变成 “I am clicked”。当用户点 &ldquo;unclick me&rdquo; 时，内容变为 “I am unclicked”。上面的代码就是实现这种效果。怎么实现的呢？</p>
<p><code>ClickOrNot</code> 是一个函数组件，其返回的结果是 <code>&lt;p>I am {click}.&lt;/p></code>，就这么简单。比较特别的是，<code>{click}</code> 是一个“变量”。</p>
<p>我们来看 <code>useState</code> 怎么用。</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>function</span> ClickOrNot() {
	<span style=color:green;font-weight:700>const</span> [click, setClick] <span style=color:#666>=</span> useState(<span style=color:#ba2121>&#34;anything&#34;</span>)
}
</code></pre></div><p><div class=info>
你不一定非要用 &ldquo;setClick&rdquo; 这个词，你改为 &ldquo;setclick&rdquo;、&ldquo;updateClick&rdquo;、&ldquo;upclick&rdquo;、&ldquo;likeclick&rdquo;、&ldquo;likeClick&rdquo; 等等都是可以的。不过约定俗成的起名法是 &ldquo;setXxxx&rdquo;，即用 &ldquo;set&rdquo; 打头，之后的首字母大写。
</div></p>
<p>这段代码的意思是，<code>click</code> 是当前的“状态” (state)，<code>setClick</code> 是一个函数，用来更新状态。<code>useState("anything")</code> 代表的是初始状态为 &ldquo;anything&rdquo;。需要注意的是，初始状态可为空：<code>useState("")</code></p>
<p><code>onClick={() => setClick("clicked")</code> 的意思是把状态变为 &ldquo;clicked&rdquo;。同样的道理，<code>onClick={() => setClick("unclicked")</code> 的意思是把状态变为 &ldquo;unclicked&rdquo;。</p>
<p>说了这么多，到底什么是“状态”？</p>
<p>在我们这个例子中，<code>{click}</code> 就是状态。我们刚刚提到，<code>ClickOrNot</code> 这个函数组件返回的结果是 <code>&lt;p>I am {click}.&lt;/p></code>。因为初始状态是 &ldquo;anything&rdquo; (上面刚讲过，<code>useState("anything")</code> 代表初始状态)，所以初始的文本是 &ldquo;I am anything&rdquo;。当用户点击 &ldquo;Click me!&rdquo; 时，状态变为 &ldquo;clicked&rdquo;，所以文本变为 &ldquo;I am clicked&rdquo;。当用户点击 &ldquo;Unclick&rdquo; 时，状态变为 &ldquo;unclicked&rdquo;，所以文本变为 &ldquo;I am unclicked&rdquo;。</p>
<h4 id=练习>练习<a href=#练习 class=header-anchor arialabel=Anchor> # </a></h4>
<p>做出一个场景。有一行文字：“我已经被打了 __ 下”。初始值为 0. 当用户点击 “你打我啊“，数值增一。当用户点击”复原“，数值回复到初始值。</p>
<p>参考：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> { useState, useEffect } from <span style=color:#ba2121>&#39;react&#39;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>;

<span style=color:green;font-weight:700>function</span> ClickPlus() {
  <span style=color:green;font-weight:700>const</span> [count, setCount] <span style=color:#666>=</span> useState(<span style=color:#666>0</span>);

  <span style=color:green;font-weight:700>return</span>(
    <span style=color:#666>&lt;&gt;</span>
      <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>我被打了 {count} 下<span>。</span><span style=color:#666>&lt;</span><span>/p&gt;</span>
      <span style=color:#666>&lt;</span>button type<span style=color:#666>=</span><span style=color:#ba2121>&#34;button&#34;</span> onClick<span style=color:#666>=</span>{() =&gt; setCount(count <span style=color:#666>+</span> <span style=color:#666>1</span>)}
      <span style=color:#666>&gt;</span>你打我啊<span style=color:#666>&lt;</span><span>/button&gt;</span>
      <span style=color:#666>&lt;</span>button type<span style=color:#666>=</span><span style=color:#ba2121>&#34;button&#34;</span> onClick<span style=color:#666>=</span>{() =&gt; setCount(<span style=color:#666>0</span>)}
      <span style=color:#666>&gt;</span>复原<span style=color:#666>&lt;</span><span>/button&gt;</span>
    <span style=color:#666>&lt;</span><span>/&gt;</span>
  )
}

ReactDOM.render(<span style=color:#666>&lt;</span>ClickPlus <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><h3 id=副作用钩子useeffect>副作用钩子：useEffect<a href=#副作用钩子useeffect class=header-anchor arialabel=Anchor> # </a></h3>
<p>上面那个练习中，每按一下“你打我啊”，数值加一。那现在我们想让数值每秒自动加一，怎么办？</p>
<p>要实现这样的效果，我们要用到副作用钩子 (useEffect)。我们还需要用到一个 JavaScript 函数：<a href=https://www.w3schools.com/jsref/met_win_settimeout.asp target=_blank rel="noreferrer noopener"><code>setTimeout</code></a>
。</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> { useState, useEffect } from <span style=color:#ba2121>&#39;react&#39;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>;

<span style=color:green;font-weight:700>function</span> Timer() {
  <span style=color:green;font-weight:700>const</span> [count, setCount] <span style=color:#666>=</span> useState(<span style=color:#666>0</span>);

  useEffect(() =&gt; {
    setTimeout(() =&gt; {
      setCount((count) =&gt; count <span style=color:#666>+</span> <span style=color:#666>1</span>);
    }, <span style=color:#666>1000</span>);
  });

  <span style=color:green;font-weight:700>return</span> <span style=color:#666>&lt;</span>h1<span style=color:#666>&gt;</span>我被打了 {count} 下<span>。</span><span style=color:#666>&lt;</span><span>/h1&gt;;</span>
}

ReactDOM.render(<span style=color:#666>&lt;</span>Timer <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>上面的代码看起来很复杂，其实并不复杂，我们来分析。</p>
<p>首先，setTimeout() 函数比较基本的句法是 <code>setTimeout(function, milliseconds)</code>。也就是，你规定的 milliseconds 过去后，setTimeout 函数会运行你写的 function。所以</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>setTimeout(() =&gt; {
	setCount((count) =&gt; count <span style=color:#666>+</span> <span style=color:#666>1</span>)
}, <span style=color:#666>1000</span>)
</code></pre></div><p>这段代码表达的意思是，当 1000 毫秒，也就是 1 秒过去后，运行 <code>() => {setCount((count) => count + 1)}</code> 这个函数。因为这个函数里还包含着另外一个函数，所以我们用 <code>{}</code> 把它包起来。这个里面的函数是：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>setCount((count) =&gt; count <span style=color:#666>+</span> <span style=color:#666>1</span>) 
<span style=color:#408080;font-style:italic>// (count) 直接省略为 count 也是可以的，因为只有一个参数，即 count
</span></code></pre></div><p>也就是把 <code>count</code> 变为 <code>count + 1</code>。</p>
<p><div class=reminder>
其实，直接简化为 <code>setCount(count + 1)</code> 也是可以的，你可以试试。 但我不知道为什么可以。你如果知道原因，可以在底下评论。
</div></p>
<p><code>useEffect</code> 是一个函数，因为里面还有一个函数，即 <code>setTimeout</code>，所以我们用 <code>{}</code> 把 <code>setTimeout</code> 这部分包起来。</p>
<h3 id=运行顺序>运行顺序<a href=#运行顺序 class=header-anchor arialabel=Anchor> # </a></h3>
<p>阮一峰老师<a href=https://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html target=_blank rel="noreferrer noopener">讲到</a>
：</p>
<blockquote>
<p><code>useEffect()</code> 的作用就是指定一个副效应函数，组件每渲染一次，该函数就自动执行一次。组件首次在网页 DOM 加载后，副效应函数也会执行。</p>
</blockquote>
<p>这句话很重要。听起来很容易理解，但其实并非那么容易。</p>
<p>为了充分理解这句话，我举一个例子。这个例子取自 Ben Ilegbodu 的博客文章 <a href=https://www.benmvp.com/blog/object-array-dependencies-react-useEffect-hook/ target=_blank rel="noreferrer noopener"><em>Object & array dependencies in the React useEffect Hook</em></a>
。</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> { useState, useEffect } from <span style=color:#ba2121>&#39;react&#39;</span>;
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>;

<span style=color:green;font-weight:700>function</span> ClickPlus() {
  <span style=color:green;font-weight:700>const</span> [count, setCount] <span style=color:#666>=</span> useState(<span style=color:#666>0</span>);

  useEffect(() =&gt; {
  	<span style=color:green>document</span>.title <span style=color:#666>=</span> <span style=color:#ba2121>`我被打了 </span><span style=color:#b68;font-weight:700>${</span>count<span style=color:#b68;font-weight:700>}</span><span style=color:#ba2121> 下。`</span>
  });

  <span style=color:green;font-weight:700>return</span>(
    <span style=color:#666>&lt;&gt;</span>
      <span style=color:#666>&lt;</span>p<span style=color:#666>&gt;</span>我被打了 {count} 下<span>。</span><span style=color:#666>&lt;</span><span>/p&gt;</span>
      <span style=color:#666>&lt;</span>button type<span style=color:#666>=</span><span style=color:#ba2121>&#34;button&#34;</span> onClick<span style=color:#666>=</span>{() =&gt; setCount(count <span style=color:#666>+</span> <span style=color:#666>1</span>)}
      <span style=color:#666>&gt;</span>你打我啊<span style=color:#666>&lt;</span><span>/button&gt;</span>
    <span style=color:#666>&lt;</span><span>/&gt;</span>
  )
}

ReactDOM.render(<span style=color:#666>&lt;</span>ClickPlus <span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>));
</code></pre></div><p>首先，<code>count</code> 初始值是 0。网页第一次渲染，网页标题 (document title) 和网页内的文本内容都是 0 下。然后，按“你打我啊”，<code>count</code> 值加一，组件渲染一次，网页内文本内容先变化，接着 <code>useEffect</code> 内的副效应函数运行一次，网页标题内容变化。不过这个过程很快，给你的感觉是它俩同时改变。</p>
<p>https://maxrozen.com/react-components-hooks-functions-vs-classes</p>
<p>https://www.pluralsight.com/guides/fetching-data-updating-state-hooks</p>
<hr>
<h1 id=react-小书--functional-components-改写>React 小书 & Functional components 改写<a href=#react-小书--functional-components-改写 class=header-anchor arialabel=Anchor> # </a></h1>
<h2 id=组件的-state-和-setstate>组件的 state 和 setState<a href=#组件的-state-和-setstate class=header-anchor arialabel=Anchor> # </a></h2>
<p>https://hyf.js.org/react-naive-book/lesson10</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#408080;font-style:italic>// 这组我不懂的是，什么时候用 `componentDidMount` 或者 `componentDidUpdate`?
</span><span style=color:#408080;font-style:italic></span>
<span style=color:green;font-weight:700>import</span> React, { Component } from <span style=color:#ba2121>&#39;react&#39;</span>
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>

<span style=color:green;font-weight:700>class</span> LikeButton <span style=color:green;font-weight:700>extends</span> Component{
  constructor(props){
    <span style=color:green;font-weight:700>super</span>(props)
    <span style=color:green;font-weight:700>this</span>.state <span style=color:#666>=</span> {isLiked<span style=color:#666>:</span> <span style=color:green;font-weight:700>false</span>}
    <span style=color:green;font-weight:700>this</span>.handleClickButton <span style=color:#666>=</span> <span style=color:green;font-weight:700>this</span>.handleClickButton.bind(<span style=color:green;font-weight:700>this</span>)
  }

  handleClickButton() {
    <span style=color:green;font-weight:700>this</span>.setState({
      isLiked<span style=color:#666>:</span> <span style=color:#666>!</span><span style=color:green;font-weight:700>this</span>.state.isLiked
    })
  }

  render() {
    <span style=color:green;font-weight:700>return</span>(
      <span style=color:#666>&lt;</span>button onClick<span style=color:#666>=</span>{<span style=color:green;font-weight:700>this</span>.handleClickButton}<span style=color:#666>&gt;</span>
      {<span style=color:green;font-weight:700>this</span>.state.isLiked<span style=color:#666>?</span> <span style=color:#ba2121>&#34;取消&#34;</span> <span style=color:#666>:</span> <span style=color:#ba2121>&#34;点赞&#34;</span>}<span>👍</span>
      <span style=color:#666>&lt;</span><span>/button&gt;</span>
    )
  }
}

ReactDOM.render(<span style=color:#666>&lt;</span>LikeButton<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><p>用状态钩子：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> React, { useState } from <span style=color:#ba2121>&#39;react&#39;</span>
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>

<span style=color:green;font-weight:700>export</span> <span style=color:green;font-weight:700>default</span> <span style=color:green;font-weight:700>function</span> LikeButton() {

  <span style=color:green;font-weight:700>const</span> [isLiked, setIsliked] <span style=color:#666>=</span> useState(<span style=color:green;font-weight:700>false</span>);

  <span style=color:green;font-weight:700>return</span>(
    <span style=color:#666>&lt;</span>button onClick<span style=color:#666>=</span>{() =&gt; {setIsliked(<span style=color:#666>!</span>isLiked)}}<span style=color:#666>&gt;</span>
    {isLiked<span style=color:#666>?</span> <span style=color:#ba2121>&#34;取消&#34;</span> <span style=color:#666>:</span> <span style=color:#ba2121>&#34;点赞&#34;</span>}<span>👍</span>
    <span style=color:#666>&lt;</span><span>/button&gt;</span>
  )

}

ReactDOM.render(<span style=color:#666>&lt;</span>LikeButton<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#39;root&#39;</span>))
</code></pre></div><h2 id=渲染列表数据>渲染列表数据<a href=#渲染列表数据 class=header-anchor arialabel=Anchor> # </a></h2>
<p>https://hyf.js.org/react-naive-book/lesson13</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> React from <span style=color:#ba2121>&#39;react&#39;</span>
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>

<span style=color:green;font-weight:700>const</span> users <span style=color:#666>=</span> [
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Jerry&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>21</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;male&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Tomy&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>22</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;male&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Lily&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>19</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;female&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Lucy&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>20</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;female&#39;</span> }
]

<span style=color:green;font-weight:700>export</span> <span style=color:green;font-weight:700>default</span> <span style=color:green;font-weight:700>function</span> Index() {
  <span style=color:green;font-weight:700>const</span> usersElements <span style=color:#666>=</span> []
  <span style=color:green;font-weight:700>for</span> (<span style=color:green;font-weight:700>let</span> user <span style=color:green;font-weight:700>of</span> users){
    usersElements.push(
      <span style=color:#666>&lt;&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>姓名<span style=color:#666>:</span> {user.username}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>年龄<span style=color:#666>:</span> {user.age}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>性别<span style=color:#666>:</span> {user.gender}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>hr<span style=color:#666>/&gt;</span>
      <span style=color:#666>&lt;</span><span>/&gt;</span>
    )
  }

  <span style=color:green;font-weight:700>return</span>(
    <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>{usersElements}<span style=color:#666>&lt;</span><span>/div&gt;</span>
  )
}

ReactDOM.render(<span style=color:#666>&lt;</span>Index<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#34;root&#34;</span>))
</code></pre></div><p>用 <code>map</code> 函数：</p>
<div class=highlight><pre tabindex=0 style=-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:green;font-weight:700>import</span> React from <span style=color:#ba2121>&#39;react&#39;</span>
<span style=color:green;font-weight:700>import</span> ReactDOM from <span style=color:#ba2121>&#39;react-dom&#39;</span>

<span style=color:green;font-weight:700>const</span> users <span style=color:#666>=</span> [
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Jerry&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>21</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;male&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Tomy&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>22</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;male&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Lily&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>19</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;female&#39;</span> },
  { username<span style=color:#666>:</span> <span style=color:#ba2121>&#39;Lucy&#39;</span>, age<span style=color:#666>:</span> <span style=color:#666>20</span>, gender<span style=color:#666>:</span> <span style=color:#ba2121>&#39;female&#39;</span> }
]

<span style=color:green;font-weight:700>export</span> <span style=color:green;font-weight:700>default</span> <span style=color:green;font-weight:700>function</span> Index() {
  <span style=color:green;font-weight:700>return</span>(
      users.map(user =&gt; 
        <span style=color:#666>&lt;&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>姓名<span style=color:#666>:</span> {user.username}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>年龄<span style=color:#666>:</span> {user.age}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>div<span style=color:#666>&gt;</span>性别<span style=color:#666>:</span> {user.gender}<span style=color:#666>&lt;</span><span>/div&gt;</span>
        <span style=color:#666>&lt;</span>hr<span style=color:#666>/&gt;</span>
        <span style=color:#666>&lt;</span><span>/&gt;</span>
        )
       )
}

ReactDOM.render(<span style=color:#666>&lt;</span>Index<span style=color:#666>/&gt;</span>, <span style=color:green>document</span>.getElementById(<span style=color:#ba2121>&#34;root&#34;</span>))
</code></pre></div><p>注意上面这段代码中，JSX 如何内嵌到 <code>map</code> 函数的表达式中。这是因为，上面第四点提到的，<a href=https://reactjs.org/docs/introducing-jsx.html#jsx-is-an-expression-too target=_blank rel="noreferrer noopener">可以把 JSX 当成 JavaScript 表达式来用</a>
。这里，<code>map</code> 函数的输出值是 JSX，这也就是官方文档中提到的 <a href=https://reactjs.org/docs/introducing-jsx.html#jsx-is-an-expression-too target=_blank rel="noreferrer noopener">&ldquo;return it from functions&rdquo;</a>
.</p>
<a href=https://hongtaoh.com/tags/%E7%BC%96%E7%A8%8B/>#编程</a>
<p style=color:#777>最后一次修改于 2022-10-04</p>
</div>
<a href=#top><i class="fa fa-chevron-up" style=font-size:30px;color:#000></i></a>
</main>
<footer class=footer>
<script src=https://utteranc.es/client.js repo=hongtaoh/hongtaoh.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script>
<script type=text/javascript src=/js/math-code.js></script>
<script async src="//mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type=text/javascript src=/js/center-img.js></script>
<ul class=footer-links>
<li><a href=/cn/blog/index.xml type=application/rss+xml title="RSS feed">
订阅 </a>
</li>
<li>
<a href=http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank>
版权
<i class="fa fa-cc" aria-hidden=true title="Attribution-NonCommercial-ShareAlike 4.0 International"></i>
</a>
</li>
</ul>
<div class=copyright-text>
©
郝鸿涛
2020-2022
</div>
</footer>